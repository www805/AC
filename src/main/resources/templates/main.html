<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.springframework.org/schema/mvc">
<head>
    <meta charset="UTF-8">
    <title>笔录授权系统</title>
    <link rel="stylesheet" href="/layui/css/layui.css">
    <style type="text/css">
        .center{
            margin: 60px auto;
            text-align: center;
        }
        .bottom_mian{
            text-align:center;
            background-color: #eee;
            position: fixed;
            bottom: 0;
            width: 100%;
            padding: 5px 0;
        }
        .top_button {
            width: 500px;
            height: 60px;
            font-size: 24px;
        }
        .layui-btn-normal {
            background-color: #4A77D4;
        }
        .layui-input-block {
            margin-left: 150px;
        }
        .layui-form-label {
            width: 120px;
        }
        #guanli .layui-input-block {
            margin-left: 110px;
        }
        #guanli .layui-form-label {
            width: 80px;
        }
        .layui-form-onswitch {
            border-color: #4A77D4;
            background-color: #4A77D4;
        }
        .layui-form-select dl dd.layui-this {
            background-color: #4A77D4;
            color: #fff;
        }
        .layui-tab-brief>.layui-tab-title .layui-this {
            color: #4A77D4;
        }
        .layui-upload-drag .layui-icon {
            font-size: 50px;
            color: #4A77D4;
        }
        .layui-tab-brief>.layui-tab-title .layui-this {
            color: #4A77D4;
        }
        .layui-form-checked span, .layui-form-checked:hover span {
            background-color: #4A77D4;
        }
        .layui-form-checked i, .layui-form-checked:hover i {
            color: #4A77D4;
        }
        .layui-layer-btn .layui-layer-btn0 {
            border-color: #4A77D4;
            background-color: #4A77D4;
        }
        .layui-main {
            width: 1500px;
        }
        #paging {
            float: right;
            margin-bottom: 50px;
        }
        .sqbianhao{
            width: 50px;padding: 9px 9px 9px 0px;
        }
        .td_right{
            float: right;
        }
        #sqinif td{
            padding: 3px;
        }
    </style>
</head>
<body style="background: url('/img/body.png');">

<table id="sqinif" style="display: none;margin: 15px 40px;">
</table>

<div class="layui-row" id="da_row">
    <div class="layui-col-xs12 layui-col-md12">

        <div class="layui-main">
            <div class="center">
                <h1 style="font-weight: bold;">授权申请表</h1>
            </div>

            <form class="layui-form" action="">

                <div class="layui-form-item">
                    <label class="layui-form-label"><span style="color: red;">*</span>申请人名称</label>
                    <div class="layui-input-block">
                        <input type="text" name="username" required="" lay-verify="required" autocomplete="off" placeholder="请输入申请人名称" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label"><span style="color: red;">*</span>授权公司名称</label>
                    <div class="layui-input-block">
                        <input type="text" name="companyname" required="" lay-verify="required" autocomplete="off" placeholder="请输入授权公司的名称" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label"><span style="color: red;">*</span>单位名称</label>
                    <div class="layui-input-block">
                        <input type="text" name="clientName" required="" lay-verify="required" autocomplete="off" placeholder="请输入单位名称（部署使用的单位）" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label"><span style="color: red;">*</span>单位代码</label>
                    <div class="layui-input-block">
                        <input type="text" name="unitCode" required="" lay-verify="required" autocomplete="off" placeholder="请输入单位代码如：avst" class="layui-input">
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label"><span style="color: red;">*</span>授权台数</label>
                    <div class="layui-input-block">
                        <input type="number" name="sqNum" lay-verify="required|number" required="" autocomplete="off" placeholder="请输入授权台数" class="layui-input" value="1" onkeypress="return (/[\d]/.test(String.fromCharCode(event.keyCode)))">
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label"><span style="color: red;">*</span>授权总天数</label>
                    <div class="layui-input-block">
                        <input type="number" name="sqDay" lay-verify="required|number" required="" autocomplete="off" placeholder="请输入授权总天数" class="layui-input" onkeypress="return (/[\d]/.test(String.fromCharCode(event.keyCode)))">
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label"><span style="color: red;">*</span>是否永久授权</label>
                    <div class="layui-input-block">
                        <input type="checkbox" name="foreverBool" id="foreverBool" lay-filter="foreverBool" lay-skin="switch"><div class="layui-unselect layui-form-switch" lay-skin="_switch"><em></em><i></i></div>
                    </div>
                </div>

                <div class="layui-form-item">
                    <div id="jiaru">
                        <label class="layui-form-label">授权码编号</label>
                    </div>
                    <button type="button" class="layui-btn layui-btn-normal" onclick="addsqinfo();">添加授权码</button>
                    <span style="color: #999;">（非必填）</span>
                </div>


                <div class="layui-form-item">
                    <label class="layui-form-label"><span style="color: red;">*</span>公司简介</label>
                    <div class="layui-input-block">
                        <textarea name="companymsg" placeholder="请输入公司简介" lay-verify="required" class="layui-textarea"></textarea>
                    </div>
                </div>

                <div class="layui-form-item" id="sqgns">
                    <label class="layui-form-label"><span style="color: red;">*</span>客户端的功能列表</label>
                    <div class="layui-input-block">
                        <input type="checkbox" lay-filter="checkbox" name="record_f" title="笔录管理" checked="">
                        <input type="checkbox" lay-filter="checkbox" name="asr_f" title="语音识别">
                        <input type="checkbox" lay-filter="checkbox" name="tts_f" title="语音播报">
                        <input type="checkbox" lay-filter="checkbox" name="fd_f" title="设备控制">
                    </div>
                </div>

                <div class="layui-form-item center">
                    <input type="button" class="layui-btn layui-btn-normal top_button" lay-submit lay-filter="formDemo" value="立即提交">
                    <button type="button" class="layui-btn layui-btn-normal" style="margin-left:50px;height: 60px;" onclick="location.reload();">重置</button>
                    <!--您的申请已经提交后台审核，若审核通过，将在5个工作日内联系您! onclick="formSubmit()" -->
                </div>
            </form>


        </div>

    </div>
</div>
<div class="layui-footer">
    <!-- 底部固定区域 -->
    <p id="bottom_mian" class="bottom_mian">授权系统</p>
</div>

<script language="JavaScript" src="/js/jquery-1.11.1.js"></script>
<script language="JavaScript" src="/js/common.js"></script>
<script language="JavaScript" src="/js/actionid.js"></script>
<script language="JavaScript" src="/js/web/login.js"></script>
<script th:src="@{/layui/layui.js}"type="text/javascript"></script>
<script th:src="@{/layui/lay/modules/laytpl.js}" type="text/javascript"></script>
<script th:src="@{/js/web/main.js}"type="text/javascript"></script>
<script th:inline="javascript">


    var sqinfo = {
        name:"",
        value: ""
    };

    $(function(){

        // document.onkeydown = function (event) {
        //     var e = event || window.event;
        //     if (e && e.keyCode == 13) { //回车键的键值为13
        //         event.preventDefault();
        //         // getAuthorizeList_init(1,10);
        //     }
        // };
        //
        // $('#keyword').on('input propertychange', function() {
        //     // getAuthorizeList_init(1,10);
        // });


        getPrivilege();

        // setTimeout("$(\"#chaxun\").click();",300);

    });
    layui.use(['layer', 'element', 'form'], function () {
        var layer = layui.layer; //获得layer模块
        var element = layui.element;
        var form = layui.form;
        //使用模块

        form.on('switch(foreverBool)', function (data) {
            if(this.checked){
                $("input[name='sqDay']").attr("disabled", "disabled").css("background","#eee").removeAttr("lay-verify").val("");
            }else{
                $("input[name='sqDay']").removeAttr("disabled").css("background", "").attr("lay-verify", "required|number");
            }
        });

        form.on('submit(formDemo)', function (data) {
            //功能列表选中
            $("#sqgns input[type='checkbox']:checked").each(function(index, element){

                if(isNotEmpty(sqgnlist)){
                    if (sqgnlist.indexOf(this.title) == -1) {
                        sqgnlist += "，" + this.title;
                    }
                }else{
                    sqgnlist += this.title;
                }
            });

            $("#sqgns input[type='radio']:checked").each(function(index, element){

                if(isNotEmpty(sqgnlist)){
                    if (sqgnlist.indexOf(this.title) == -1) {
                        sqgnlist += "，" + this.title;
                    }
                }else{
                    sqgnlist += this.title;
                }
            });

            //授权码
            $("#jiaru input[type='text']").each(function (index,element) {

                //sqnum  sqCode
                if (index % 2 == 0) {
                    sqinfo['name'] = this.value;
                }else{
                    sqinfo['value'] = this.value;
                    sqinfolist.push(sqinfo);
                    sqinfo = {name:"",value: ""};
                }

            });

            formSubmit();
        });

        form.render();
    });
</script>
</body>
</html>